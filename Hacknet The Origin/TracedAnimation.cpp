//严格来说这个CPP里面放的不止是动画，实际上整个traced事件的实现都会放在里面

#include"Animation.h"
#include"存档全局变量区.h"
#include<iostream>
#include<Windows.h>
using namespace std;

constexpr auto DELAY = 120;

void tracedstartanim();
void initcomptraced();
void tracedframeplay();
void mainconsole(bool jumprequired, string jumpcmd = "none");
void tracescapeanim();
void inittraced()
{
    istraced = true;
    initcomptraced();
    PlaySound(TEXT("spiral_gauge_down.wav"), NULL, SND_ASYNC);
    system("COLOR 40");
    system("cls");
    cout << "'##     '##    '###    '########  '##    ## '#### '##    ##  '######   \n ## '##  ##   '## ##    ##     ##  ###   ##   ##   ###   ## '##    ##  \n ##  ##  ##  '##   ##   ##     ##  ####  ##   ##   ####  ##  ##        \n ##  ##  ## '##     ##  ########   ## ## ##   ##   ## ## ##  ##  '#### \n ##  ##  ##  #########  ##   ##    ##  ####   ##   ##  ####  ##    ##  \n ##  ##  ##  ##     ##  ##    ##   ##   ###   ##   ##   ###  ##    ##  \n  ###  ###   ##     ##  ##     ##  ##    ## '####  ##    ##   ######   \n                                                                       \n" << endl << endl;
    coutwithsleep("已被追踪到: 进入紧急恢复模式\n", 240);
    coutwithsleep("::紧急恢复模式启动\n", 240);
    coutwithsleep("--------------------------------------------\n\n", 240);
    coutwithsleep("这个窗口是重获匿名的最后机会\n", 240);
    coutwithsleep("您当前的IP已经公开，所以您必须修改它 -\n", 240);
    coutwithsleep("这只能在您所在网络的供应商的路由服务器上完成\n", 240);
    coutwithsleep("Traceroute反馈该网络的ISP服务器的IP地址为68.144.93.18\n", 240);
    cout << "您的本地IP:" << (int)sav->ip[0] << "." << (int)sav->ip[1] << "." << (int)sav->ip[2] << "." << (int)sav->ip[3] << " 必须改变" << endl << endl;
    Sleep(240);
    coutwithsleep("接下来将启动紧急恢复模式为您带来临时的匿名，请在有限时间内更改IP\n", 240);
    coutwithsleep("否则本机将销毁所有数据作为最后避险手段——该操作不可逆，而且不能耽误\n", 240);
    PlaySound(TEXT("dark_drone_008.wav"), NULL, SND_ASYNC | SND_LOOP);
    cout << endl << endl;
    coutwithsleep("键入\"accept\"以继续紧急模式\n", 800);
    while (true)
    {
        string userinp;
        cout << ">";
        cin >> userinp;
        if (userinp == "accept") break;
    }
    system("cls");
    tracedstartanim();
    while (istraced)
    {
        mainconsole(true, "porthack");
    }
    tracescapeanim();
}


void tracescapeanim()
{
    system("cls");
    cout << "\n\n\n\n\n\n";
    cout << "    ########  ####  ######   ######   #######  ##    ## ##    ## ########  ######  ######## ######## ########  " << endl;
    cout << "    ##     ##  ##  ##    ## ##    ## ##     ## ###   ## ###   ## ##       ##    ##    ##    ##       ##     ## " << endl;
    cout << "    ##     ##  ##  ##       ##       ##     ## ####  ## ####  ## ##       ##          ##    ##       ##     ## " << endl;
    cout << "    ##     ##  ##   ######  ##       ##     ## ## ## ## ## ## ## ######   ##          ##    ######   ##     ## " << endl;
    cout << "    ##     ##  ##        ## ##       ##     ## ##  #### ##  #### ##       ##          ##    ##       ##     ## " << endl;
    cout << "    ##     ##  ##  ##    ## ##    ## ##     ## ##   ### ##   ### ##       ##    ##    ##    ##       ##     ## " << endl;
    cout << "    ########  ####  ######   ######   #######  ##    ## ##    ## ########  ######     ##    ######## ########  " << endl << endl;
    PlaySound(TEXT("spiral_gauge_down.wav"), NULL, SND_SYNC);
    cout<<"成功更改IP地址";
    ptr("......\n", 800);
    Sleep(800);
    cout << "规避外部追踪";
    ptr("...\n", 800);
    coutwithsleep("更改随机TTL\n",400);
    coutwithsleep("更改随机MAC\n", 400);
    coutwithsleep("修改操作系统伪装\n", 400);
    Sleep(500);
    cout << "正在为重启做准备";
    ptr("......\n", 800);
    cout << "正在重启";
    ptr("....\n", 80);
    bootseq();
}


void tracedstartanim()
{
    for (int i = 0; i < 10; i++) cout << endl;
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    PlaySound(TEXT("spiral_gauge_up.wav"), NULL, SND_ASYNC);
    ptr("========================================================================================================================", 14);
    PlaySound(TEXT("Traced.wav"), NULL, SND_ASYNC);
    system("cls");
    tracedframeplay();
    system("cls");
    system("COLOR 07");
    sysinit();
    cout << endl;
    ptr("ISP主机地址：", 5);
    cout << "68.144.93.18" << endl;
    ptr("本机地址：", 5);
    cout << (int)sav->ip[0] << "." << (int)sav->ip[1] << "." << (int)sav->ip[2] << "." << (int)sav->ip[3] << endl << endl;
    cin.ignore(1, '\n');
    ptr("这是你摆脱曝光的最后机会，抓紧时间！\n\n",5);
}

void tracedstartframe1();
void tracedstartframe2();
void tracedstartframe3();
void tracedstartframe4();
void tracedstartframe5();
void tracedstartframe6();
void tracedstartframe7();
void tracedstartframe8();
void tracedstartframe9();
void tracedstartframe10();

void tracedframeplay()
{
    tracedstartframe1();
    Sleep(DELAY);
    system("cls");
    tracedstartframe2();
    Sleep(DELAY);
    system("cls");
    tracedstartframe3();
    Sleep(DELAY);
    system("cls");
    tracedstartframe4();
    Sleep(DELAY);
    system("cls");
    tracedstartframe5();
    Sleep(DELAY);
    system("cls");
    tracedstartframe6();
    Sleep(DELAY);
    system("cls");
    tracedstartframe7();
    Sleep(DELAY);
    system("cls");
    tracedstartframe8();
    Sleep(DELAY);
    system("cls");
    tracedstartframe9();
    Sleep(DELAY);
    system("cls");
    tracedstartframe10();
}


void tracedstartframe1()
{
    cout << "\n\n\n\n\n\n\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "========================================================================================================================" << endl;
    cout << "========================================================================================================================" << endl;
    cout << "========================================================================================================================" << endl;
}

void tracedstartframe2()
{
    cout << "\n\n\n\n\n\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "=========================================================================================================" << endl;
    cout << "=========================================================================================================" << endl;
    cout << "=========================================================================================================" << endl;
    cout << "=========================================================================================================" << endl;
    cout << "=========================================================================================================" << endl;
}

void tracedstartframe3()
{
    cout << "\n\n\n\n\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "==========================================================================================" << endl;
    cout << "==========================================================================================" << endl;
    cout << "==========================================================================================" << endl;
    cout << "==========================================================================================" << endl;
    cout << "==========================================================================================" << endl;
    cout << "==========================================================================================" << endl;
    cout << "==========================================================================================" << endl;
}

void tracedstartframe4()
{
    cout << "\n\n\n\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
    cout << "======================================================================" << endl;
}

void tracedstartframe5()
{
    cout << "\n\n\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
    cout << "=============================================" << endl;
}

void tracedstartframe6()
{
    cout << "\n\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
    cout << "===============" << endl;
}

void tracedstartframe7()
{
    cout << "\n\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
    cout << "=====" << endl;
}

void tracedstartframe8()
{
    cout << "\n\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
    cout << "==" << endl;
}

void tracedstartframe9()
{
    cout << "\n";
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
    cout << "=" << endl ;
}

void tracedstartframe10()
{
    cout << "   ___ _   _ ___ _____ ___    _    _     ___ ________ _   _  ____   _____ _    ___ _     ____    _    _____ _____ " << endl;
    cout << "  |_ _| \\ | |_ _|_   _|_ _|  / \\  | |   |_ _|__  /_ _| \\ | |/ ___| |  ___/ \\  |_ _| |   / ___|  / \\  |  ___| ____|" << endl;
    cout << "   | ||  \\| || |  | |  | |  / _ \\ | |    | |  / / | ||  \\| | |  _  | |_ / _ \\  | || |   \\___ \\ / _ \\ | |_  |  _|  " << endl;
    cout << "   | || |\\  || |  | |  | | / ___ \\| |___ | | / /_ | || |\\  | |_| | |  _/ ___ \\ | || |___ ___) / ___ \\|  _| | |___ " << endl;
    cout << "  |___|_| \\_|___| |_| |___/_/   \\_\\_____|___/____|___|_| \\_|\\____| |_|/_/   \\_\\___|_____|____/_/   \\_\\_|   |_____|" << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
}